# ğŸ§ª ABæµ‹è¯•å®æ–½æŒ‡å—

## ğŸ“‹ ç›®å½•
1. [ABæµ‹è¯•æ¦‚å¿µ](#abæµ‹è¯•æ¦‚å¿µ)
2. [å·¥å…·é€‰æ‹©å¯¹æ¯”](#å·¥å…·é€‰æ‹©å¯¹æ¯”)
3. [å®æ–½æ–¹æ¡ˆ](#å®æ–½æ–¹æ¡ˆ)
4. [ä»£ç å®ç°](#ä»£ç å®ç°)
5. [æ•°æ®åˆ†æ](#æ•°æ®åˆ†æ)
6. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
7. [æˆæœ¬åˆ†æ](#æˆæœ¬åˆ†æ)
8. [å®æˆ˜æ¡ˆä¾‹](#å®æˆ˜æ¡ˆä¾‹)

---

## ğŸ¯ ABæµ‹è¯•æ¦‚å¿µ

### ä»€ä¹ˆæ˜¯ABæµ‹è¯•ï¼Ÿ
ABæµ‹è¯•ï¼ˆA/B Testingï¼‰æ˜¯ä¸€ç§å¯¹ç…§å®éªŒï¼Œé€šè¿‡å°†ç”¨æˆ·éšæœºåˆ†ä¸ºä¸¤ç»„æˆ–å¤šç»„ï¼Œå±•ç¤ºä¸åŒç‰ˆæœ¬çš„é¡µé¢æˆ–åŠŸèƒ½ï¼Œæ¯”è¾ƒå“ªä¸ªç‰ˆæœ¬æ•ˆæœæ›´å¥½ã€‚

### æ ¸å¿ƒä»·å€¼
- **æ•°æ®é©±åŠ¨å†³ç­–**ï¼šåŸºäºçœŸå®ç”¨æˆ·è¡Œä¸ºæ•°æ®
- **é™ä½é£é™©**ï¼šå°èŒƒå›´æµ‹è¯•ï¼Œé¿å…å…¨é‡å‘å¸ƒé—®é¢˜
- **æå‡è½¬åŒ–ç‡**ï¼šæŒç»­ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ
- **é‡åŒ–æ•ˆæœ**ï¼šç²¾ç¡®è¡¡é‡æ”¹è¿›æ•ˆæœ

### é€‚ç”¨åœºæ™¯
- ğŸ¨ **UI/UXä¼˜åŒ–**ï¼šæŒ‰é’®é¢œè‰²ã€ä½ç½®ã€æ–‡æ¡ˆ
- ğŸ“„ **é¡µé¢å¸ƒå±€**ï¼šä¸åŒçš„é¡µé¢ç»“æ„å’Œå†…å®¹æ’åˆ—
- ğŸ’° **å®šä»·ç­–ç•¥**ï¼šä¸åŒçš„ä»·æ ¼å±•ç¤ºæ–¹å¼
- ğŸ“§ **è¥é”€æ´»åŠ¨**ï¼šé‚®ä»¶æ ‡é¢˜ã€æ¨é€å†…å®¹
- ğŸ”§ **åŠŸèƒ½æµ‹è¯•**ï¼šæ–°åŠŸèƒ½çš„ä¸åŒå®ç°æ–¹å¼

---

## ğŸ› ï¸ å·¥å…·é€‰æ‹©å¯¹æ¯”

### 1. Google Optimizeï¼ˆæ¨è - å…è´¹ï¼‰
```typescript
ä¼˜åŠ¿ï¼š
âœ… ä¸Google Analyticsæ·±åº¦é›†æˆ
âœ… å®Œå…¨å…è´¹ï¼ˆ2023å¹´åœæ­¢æœåŠ¡ï¼Œå»ºè®®æ›¿ä»£æ–¹æ¡ˆï¼‰
âœ… å¯è§†åŒ–ç¼–è¾‘å™¨
âœ… æœåŠ¡å™¨ç«¯æµ‹è¯•æ”¯æŒ
```

### 2. **Vercel Edge Config + Analyticsï¼ˆæ¨èï¼‰**
```typescript
ä¼˜åŠ¿ï¼š
âœ… ä¸Next.jså®Œç¾é›†æˆ
âœ… è¾¹ç¼˜è®¡ç®—ï¼Œæ€§èƒ½ä¼˜å¼‚
âœ… å…è´¹é¢åº¦å……è¶³
âœ… å®æ—¶é…ç½®æ›´æ–°
âœ… TypeScriptåŸç”Ÿæ”¯æŒ
```

### 3. PostHogï¼ˆå¼€æºæ¨èï¼‰
```typescript
ä¼˜åŠ¿ï¼š
âœ… å¼€æºå…è´¹
âœ… åŠŸèƒ½ä¸°å¯Œï¼ˆABæµ‹è¯•ã€ç”¨æˆ·åˆ†æã€ä¼šè¯å½•åˆ¶ï¼‰
âœ… éšç§å‹å¥½
âœ… è‡ªæ‰˜ç®¡é€‰é¡¹
```

### 4. Split.ioï¼ˆä¼ä¸šçº§ï¼‰
```typescript
ä¼˜åŠ¿ï¼š
âœ… ä¼ä¸šçº§åŠŸèƒ½
âœ… å®æ—¶ç‰¹æ€§å¼€å…³
âœ… è¯¦ç»†çš„ç»Ÿè®¡åˆ†æ
âŒ æˆæœ¬è¾ƒé«˜
```

### 5. Optimizelyï¼ˆä¸“ä¸šçº§ï¼‰
```typescript
ä¼˜åŠ¿ï¼š
âœ… è¡Œä¸šæ ‡å‡†å·¥å…·
âœ… é«˜çº§ç»Ÿè®¡åŠŸèƒ½
âœ… ä¼ä¸šçº§æ”¯æŒ
âŒ ä»·æ ¼æ˜‚è´µ
```

---

## ğŸš€ å®æ–½æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šVercel Edge Config + Next.jsï¼ˆæ¨èï¼‰

#### ä¼˜åŠ¿åˆ†æ
- **æ€§èƒ½ä¼˜å¼‚**ï¼šè¾¹ç¼˜è®¡ç®—ï¼Œå…¨çƒCDNåˆ†å‘
- **æˆæœ¬ä½å»‰**ï¼šVercelå…è´¹é¢åº¦å……è¶³
- **é›†æˆç®€å•**ï¼šä¸ç°æœ‰Next.jsæ¶æ„æ— ç¼é›†æˆ
- **å®æ—¶æ›´æ–°**ï¼šæ— éœ€é‡æ–°éƒ¨ç½²å³å¯è°ƒæ•´å®éªŒ

#### æ¶æ„å›¾
```
ç”¨æˆ·è¯·æ±‚ â†’ Edge Runtime â†’ å®éªŒåˆ†ç»„ â†’ æ¸²æŸ“å¯¹åº”ç‰ˆæœ¬ â†’ è®°å½•æ•°æ®
```

### æ–¹æ¡ˆ2ï¼šPostHogé›†æˆæ–¹æ¡ˆ

#### é€‚ç”¨åœºæ™¯
- éœ€è¦å®Œæ•´çš„ç”¨æˆ·è¡Œä¸ºåˆ†æ
- æ³¨é‡æ•°æ®éšç§
- å¸Œæœ›è‡ªå»ºæ•°æ®åˆ†æå¹³å°

### æ–¹æ¡ˆ3ï¼šè‡ªå»ºABæµ‹è¯•ç³»ç»Ÿ

#### é€‚ç”¨åœºæ™¯
- å¯¹æ•°æ®å®‰å…¨æœ‰ç‰¹æ®Šè¦æ±‚
- éœ€è¦é«˜åº¦è‡ªå®šä¹‰åŠŸèƒ½
- æœ‰å……è¶³çš„å¼€å‘èµ„æº

---

## ğŸ’» ä»£ç å®ç°

### æ–¹æ¡ˆ1ï¼šVercel Edge Configå®ç°

#### æ­¥éª¤1ï¼šå®‰è£…ä¾èµ–
```bash
npm install @vercel/edge-config
```

#### æ­¥éª¤2ï¼šåˆ›å»ºABæµ‹è¯•Hook
```typescript
// hooks/useABTest.ts
'use client'

import { useState, useEffect } from 'react'
import { get } from '@vercel/edge-config'

interface ABTestConfig {
  name: string
  variants: string[]
  traffic: number // å‚ä¸æµ‹è¯•çš„æµé‡æ¯”ä¾‹ (0-1)
}

export function useABTest(testName: string) {
  const [variant, setVariant] = useState<string>('control')
  const [isLoading, setIsLoading] = useState(true)

  useEffect(() => {
    async function initABTest() {
      try {
        // è·å–ç”¨æˆ·IDï¼ˆåŸºäºsessionæˆ–cookieï¼‰
        let userId = localStorage.getItem('ab_user_id')
        if (!userId) {
          userId = Math.random().toString(36).substring(7)
          localStorage.setItem('ab_user_id', userId)
        }

        // ä»Edge Configè·å–å®éªŒé…ç½®
        const config = await get<ABTestConfig>(testName)
        
        if (!config || !config.variants) {
          setVariant('control')
          setIsLoading(false)
          return
        }

        // è®¡ç®—ç”¨æˆ·æ˜¯å¦å‚ä¸å®éªŒ
        const hash = simpleHash(userId + testName)
        const shouldParticipate = (hash % 100) / 100 < config.traffic

        if (!shouldParticipate) {
          setVariant('control')
          setIsLoading(false)
          return
        }

        // åˆ†é…å˜ä½“
        const variantIndex = hash % config.variants.length
        const selectedVariant = config.variants[variantIndex]
        
        setVariant(selectedVariant)
        
        // è®°å½•å®éªŒå‚ä¸äº‹ä»¶
        if (typeof window !== 'undefined' && window.gtag) {
          window.gtag('event', 'ab_test_participate', {
            'test_name': testName,
            'variant': selectedVariant,
            'user_id': userId
          })
        }
        
      } catch (error) {
        console.error('AB Test Error:', error)
        setVariant('control')
      } finally {
        setIsLoading(false)
      }
    }

    initABTest()
  }, [testName])

  return { variant, isLoading }
}

// ç®€å•å“ˆå¸Œå‡½æ•°
function simpleHash(str: string): number {
  let hash = 0
  for (let i = 0; i < str.length; i++) {
    const char = str.charCodeAt(i)
    hash = ((hash << 5) - hash) + char
    hash = hash & hash // è½¬æ¢ä¸º32ä½æ•´æ•°
  }
  return Math.abs(hash)
}
```

#### æ­¥éª¤3ï¼šåˆ›å»ºABæµ‹è¯•ç»„ä»¶
```typescript
// components/ab-test-wrapper.tsx
'use client'

import React from 'react'
import { useABTest } from '@/hooks/useABTest'

interface ABTestWrapperProps {
  testName: string
  children: {
    [variantName: string]: React.ReactNode
  }
  fallback?: React.ReactNode
}

export function ABTestWrapper({ testName, children, fallback }: ABTestWrapperProps) {
  const { variant, isLoading } = useABTest(testName)

  if (isLoading) {
    return fallback || null
  }

  return <>{children[variant] || children.control || fallback}</>
}
```

#### æ­¥éª¤4ï¼šåœ¨é¡µé¢ä¸­ä½¿ç”¨
```typescript
// app/page.tsx ç¤ºä¾‹
import { ABTestWrapper } from '@/components/ab-test-wrapper'

export default function HomePage() {
  return (
    <div>
      <h1>BrickRecipes</h1>
      
      {/* ABæµ‹è¯•ï¼šé¦–é¡µCTAæŒ‰é’® */}
      <ABTestWrapper testName="homepage_cta_button">
        {{
          control: (
            <button className="bg-blue-500 text-white px-6 py-3 rounded">
              å¼€å§‹æ¢ç´¢é£Ÿè°±
            </button>
          ),
          variant_a: (
            <button className="bg-green-500 text-white px-8 py-4 rounded-lg text-lg">
              ç«‹å³å‘ç°ç¾é£Ÿ
            </button>
          ),
          variant_b: (
            <button className="bg-red-500 text-white px-6 py-3 rounded border-2 border-red-700">
              ğŸ³ å¼€å§‹çƒ¹é¥ªä¹‹æ—…
            </button>
          )
        }}
      </ABTestWrapper>

      {/* ABæµ‹è¯•ï¼šä»·æ ¼å±•ç¤ºæ–¹å¼ */}
      <ABTestWrapper testName="pricing_display">
        {{
          control: (
            <div className="text-2xl font-bold">Â¥29.9/æœˆ</div>
          ),
          variant_a: (
            <div>
              <span className="text-gray-500 line-through">Â¥39.9</span>
              <span className="text-2xl font-bold text-red-500 ml-2">Â¥29.9/æœˆ</span>
            </div>
          )
        }}
      </ABTestWrapper>
    </div>
  )
}
```

### æ–¹æ¡ˆ2ï¼šPostHogé›†æˆå®ç°

#### æ­¥éª¤1ï¼šå®‰è£…PostHog
```bash
npm install posthog-js
```

#### æ­¥éª¤2ï¼šé…ç½®PostHog
```typescript
// lib/posthog.ts
import posthog from 'posthog-js'

if (typeof window !== 'undefined') {
  posthog.init(process.env.NEXT_PUBLIC_POSTHOG_KEY!, {
    api_host: process.env.NEXT_PUBLIC_POSTHOG_HOST || 'https://app.posthog.com',
    // ç¡®ä¿åœ¨ä¸­å›½ä¹Ÿèƒ½ä½¿ç”¨
    disable_session_recording: false,
    capture_pageview: true,
    capture_pageleave: true,
    // å…¶ä»–é…ç½®...
  })
}

export default posthog
```

#### æ­¥éª¤3ï¼šåˆ›å»ºPostHog Provider
```typescript
// components/posthog-provider.tsx
'use client'

import posthog from 'posthog-js'
import { PostHogProvider } from 'posthog-js/react'

if (typeof window !== 'undefined') {
  posthog.init(process.env.NEXT_PUBLIC_POSTHOG_KEY!, {
    api_host: 'https://app.posthog.com',
  })
}

export function PHProvider({ children }: { children: React.ReactNode }) {
  return <PostHogProvider client={posthog}>{children}</PostHogProvider>
}
```

#### æ­¥éª¤4ï¼šPostHog ABæµ‹è¯•Hook
```typescript
// hooks/usePostHogABTest.ts
import { useFeatureFlagEnabled } from 'posthog-js/react'

export function usePostHogABTest(flagKey: string) {
  const isEnabled = useFeatureFlagEnabled(flagKey)
  return isEnabled
}
```

---

## ğŸ“Š æ•°æ®åˆ†æ

### å…³é”®æŒ‡æ ‡å®šä¹‰

#### 1. æŠ€æœ¯æŒ‡æ ‡
```typescript
interface ABTestMetrics {
  // åŸºç¡€æŒ‡æ ‡
  participants: number        // å‚ä¸äººæ•°
  conversions: number        // è½¬åŒ–äººæ•°
  conversionRate: number     // è½¬åŒ–ç‡
  
  // ç»Ÿè®¡æŒ‡æ ‡
  confidence: number         // ç½®ä¿¡åº¦
  pValue: number            // På€¼
  significance: boolean      // æ˜¯å¦æ˜¾è‘—
  
  // ä¸šåŠ¡æŒ‡æ ‡
  revenue?: number          // æ”¶å…¥
  averageOrderValue?: number // å®¢å•ä»·
  retention?: number        // ç•™å­˜ç‡
}
```

#### 2. ç»Ÿè®¡æ˜¾è‘—æ€§è®¡ç®—
```typescript
// utils/statistics.ts
export function calculateSignificance(
  controlConversions: number,
  controlVisitors: number,
  variantConversions: number,
  variantVisitors: number
): {
  pValue: number
  confidence: number
  isSignificant: boolean
} {
  const p1 = controlConversions / controlVisitors
  const p2 = variantConversions / variantVisitors
  
  const pooledP = (controlConversions + variantConversions) / 
                  (controlVisitors + variantVisitors)
  
  const se = Math.sqrt(pooledP * (1 - pooledP) * 
                      (1/controlVisitors + 1/variantVisitors))
  
  const zScore = (p2 - p1) / se
  const pValue = 2 * (1 - normalCDF(Math.abs(zScore)))
  
  return {
    pValue,
    confidence: 1 - pValue,
    isSignificant: pValue < 0.05
  }
}

function normalCDF(x: number): number {
  // æ ‡å‡†æ­£æ€åˆ†å¸ƒç´¯ç§¯å¯†åº¦å‡½æ•°è¿‘ä¼¼
  return 0.5 * (1 + erf(x / Math.sqrt(2)))
}

function erf(x: number): number {
  // è¯¯å·®å‡½æ•°è¿‘ä¼¼
  const a1 =  0.254829592
  const a2 = -0.284496736
  const a3 =  1.421413741
  const a4 = -1.453152027
  const a5 =  1.061405429
  const p  =  0.3275911

  const sign = x >= 0 ? 1 : -1
  x = Math.abs(x)

  const t = 1.0 / (1.0 + p * x)
  const y = 1.0 - (((((a5 * t + a4) * t) + a3) * t + a2) * t + a1) * t * Math.exp(-x * x)

  return sign * y
}
```

### åˆ†æä»ªè¡¨æ¿ç»„ä»¶
```typescript
// components/ab-test-dashboard.tsx
'use client'

import { useState, useEffect } from 'react'
import { calculateSignificance } from '@/utils/statistics'

interface TestResult {
  name: string
  variant: string
  visitors: number
  conversions: number
  conversionRate: number
}

export function ABTestDashboard() {
  const [results, setResults] = useState<TestResult[]>([])

  useEffect(() => {
    // ä»Analytics APIè·å–æ•°æ®
    fetchTestResults()
  }, [])

  const fetchTestResults = async () => {
    // å®ç°æ•°æ®è·å–é€»è¾‘
    // å¯ä»¥ä»Google Analyticsã€ç™¾åº¦ç»Ÿè®¡æˆ–è‡ªå»ºæ•°æ®åº“è·å–
  }

  return (
    <div className="space-y-6">
      <h2 className="text-2xl font-bold">ABæµ‹è¯•ç»“æœ</h2>
      
      {results.map((result) => (
        <div key={`${result.name}-${result.variant}`} 
             className="border rounded-lg p-4">
          <h3 className="text-lg font-semibold">{result.name}</h3>
          <div className="grid grid-cols-4 gap-4 mt-2">
            <div>
              <div className="text-sm text-gray-600">å˜ä½“</div>
              <div className="font-bold">{result.variant}</div>
            </div>
            <div>
              <div className="text-sm text-gray-600">è®¿å®¢æ•°</div>
              <div className="font-bold">{result.visitors.toLocaleString()}</div>
            </div>
            <div>
              <div className="text-sm text-gray-600">è½¬åŒ–æ•°</div>
              <div className="font-bold">{result.conversions.toLocaleString()}</div>
            </div>
            <div>
              <div className="text-sm text-gray-600">è½¬åŒ–ç‡</div>
              <div className="font-bold">
                {(result.conversionRate * 100).toFixed(2)}%
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>
  )
}
```

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. å®éªŒè®¾è®¡åŸåˆ™

#### æ˜ç¡®å‡è®¾
```markdown
âŒ é”™è¯¯ï¼šæ”¹å˜æŒ‰é’®é¢œè‰²å¯èƒ½ä¼šæé«˜ç‚¹å‡»ç‡
âœ… æ­£ç¡®ï¼šå°†CTAæŒ‰é’®ä»è“è‰²æ”¹ä¸ºç»¿è‰²ï¼Œé¢„è®¡å¯æé«˜ç‚¹å‡»ç‡15%ï¼Œ
         å› ä¸ºç»¿è‰²åœ¨è§†è§‰å¿ƒç†å­¦ä¸­ä»£è¡¨ç§¯æè¡ŒåŠ¨
```

#### æ ·æœ¬é‡è®¡ç®—
```typescript
// å®éªŒå¼€å§‹å‰è®¡ç®—æ‰€éœ€æ ·æœ¬é‡
function calculateSampleSize(
  baseConversionRate: number,
  minimumDetectableEffect: number,
  significance: number = 0.05,
  power: number = 0.8
): number {
  // ç®€åŒ–çš„æ ·æœ¬é‡è®¡ç®—
  const alpha = significance
  const beta = 1 - power
  
  const p1 = baseConversionRate
  const p2 = baseConversionRate * (1 + minimumDetectableEffect)
  
  // æ¯ç»„æ‰€éœ€æ ·æœ¬é‡
  const n = Math.ceil(
    2 * Math.pow(1.96 + 0.84, 2) * p1 * (1 - p1) / 
    Math.pow(p2 - p1, 2)
  )
  
  return n
}

// ä½¿ç”¨ç¤ºä¾‹
const sampleSize = calculateSampleSize(
  0.05,   // å½“å‰è½¬åŒ–ç‡5%
  0.20    // å¸Œæœ›æ£€æµ‹åˆ°20%çš„æå‡
)
console.log(`æ¯ç»„éœ€è¦ ${sampleSize} ä¸ªæ ·æœ¬`)
```

### 2. å®éªŒç›‘æ§

#### å®æ—¶ç›‘æ§æŒ‡æ ‡
```typescript
// components/ab-test-monitor.tsx
export function ABTestMonitor({ testName }: { testName: string }) {
  const [metrics, setMetrics] = useState({
    sampleRatio: 0,
    dataQuality: 'good',
    runtime: 0,
    estimatedTimeToSignificance: 0
  })

  return (
    <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
      <h4 className="font-semibold text-yellow-800">å®éªŒç›‘æ§</h4>
      <div className="grid grid-cols-2 gap-4 mt-2 text-sm">
        <div>
          <span className="text-yellow-700">æ ·æœ¬æ¯”ä¾‹:</span>
          <span className="ml-2 font-mono">{metrics.sampleRatio.toFixed(3)}</span>
        </div>
        <div>
          <span className="text-yellow-700">æ•°æ®è´¨é‡:</span>
          <span className="ml-2">{metrics.dataQuality}</span>
        </div>
      </div>
    </div>
  )
}
```

### 3. é¿å…å¸¸è§é”™è¯¯

#### ğŸš« è¿‡æ—©åœæ­¢å®éªŒ
```typescript
// é”™è¯¯ï¼šçœ‹åˆ°åˆæœŸæ•°æ®å°±åœæ­¢
if (earlyResults.isSignificant) {
  stopExperiment() // âŒ å±é™©ï¼
}

// æ­£ç¡®ï¼šè¾¾åˆ°é¢„å®šæ ·æœ¬é‡æˆ–æ—¶é—´
if (totalSamples >= requiredSampleSize || daysRunning >= minDuration) {
  if (results.isSignificant) {
    stopExperiment() // âœ… æ­£ç¡®
  }
}
```

#### ğŸš« å¤šé‡æ¯”è¾ƒé—®é¢˜
```typescript
// é”™è¯¯ï¼šåŒæ—¶æµ‹è¯•å¤šä¸ªæŒ‡æ ‡è€Œä¸è°ƒæ•´æ˜¾è‘—æ€§æ°´å¹³
const tests = ['ctr', 'conversion', 'revenue', 'retention']
tests.forEach(metric => {
  if (testResult[metric].pValue < 0.05) { // âŒ æœªè°ƒæ•´
    console.log(`${metric} æ˜¾è‘—`)
  }
})

// æ­£ç¡®ï¼šBonferroniä¿®æ­£
const adjustedAlpha = 0.05 / tests.length
tests.forEach(metric => {
  if (testResult[metric].pValue < adjustedAlpha) { // âœ… å·²è°ƒæ•´
    console.log(`${metric} æ˜¾è‘—`)
  }
})
```

---

## ğŸ’° æˆæœ¬åˆ†æ

### å…è´¹æ–¹æ¡ˆå¯¹æ¯”
| å·¥å…· | æœˆæµé‡é™åˆ¶ | å®éªŒæ•°é‡ | é«˜çº§åŠŸèƒ½ |
|------|-----------|----------|----------|
| Vercel Edge Config | æ— é™åˆ¶ | æ— é™åˆ¶ | âœ… è¾¹ç¼˜è®¡ç®— |
| PostHog | 100ä¸‡äº‹ä»¶ | 3ä¸ªå¹¶å‘ | âœ… ç”¨æˆ·è¡Œä¸ºåˆ†æ |
| è‡ªå»ºæ–¹æ¡ˆ | æ— é™åˆ¶ | æ— é™åˆ¶ | âœ… å®Œå…¨æ§åˆ¶ |

### ä»˜è´¹æ–¹æ¡ˆå¯¹æ¯”
| å·¥å…· | èµ·æ­¥ä»·æ ¼ | æµé‡é™åˆ¶ | ä¼ä¸šåŠŸèƒ½ |
|------|----------|----------|----------|
| Optimizely | $50/æœˆ | 10ä¸‡è®¿å®¢ | âœ… é«˜çº§ç»Ÿè®¡ |
| Split.io | $20/æœˆ | 10ä¸‡MAU | âœ… ç‰¹æ€§ç®¡ç† |
| PostHog Pro | $0.00045/äº‹ä»¶ | æŒ‰ä½¿ç”¨ä»˜è´¹ | âœ… å…¨åŠŸèƒ½ |

---

## ğŸ† å®æˆ˜æ¡ˆä¾‹

### æ¡ˆä¾‹1ï¼šé¦–é¡µCTAæŒ‰é’®ä¼˜åŒ–

#### èƒŒæ™¯
BrickRecipesé¦–é¡µçš„"å¼€å§‹æ¢ç´¢"æŒ‰é’®ç‚¹å‡»ç‡è¾ƒä½ï¼ˆ2.3%ï¼‰ï¼Œå¸Œæœ›é€šè¿‡ABæµ‹è¯•æå‡ã€‚

#### å®éªŒè®¾è®¡
```typescript
// å®éªŒé…ç½®
const ctaButtonTest = {
  name: 'homepage_cta_optimization',
  hypothesis: 'æ›´æ˜ç¡®çš„è¡ŒåŠ¨å¯¼å‘æ–‡æ¡ˆå’Œæ›´é†’ç›®çš„è§†è§‰è®¾è®¡å¯ä»¥æå‡ç‚¹å‡»ç‡',
  variants: {
    control: {
      text: 'å¼€å§‹æ¢ç´¢',
      color: 'blue',
      size: 'medium'
    },
    variant_a: {
      text: 'ç«‹å³å‘ç°ç¾é£Ÿ',
      color: 'green', 
      size: 'large'
    },
    variant_b: {
      text: 'ğŸ³ å¼€å§‹çƒ¹é¥ªä¹‹æ—…',
      color: 'orange',
      size: 'medium'
    }
  },
  trafficSplit: [40, 30, 30], // æ§åˆ¶ç»„åˆ†é…æ›´å¤šæµé‡
  primaryMetric: 'cta_click_rate',
  secondaryMetrics: ['session_duration', 'page_depth']
}
```

#### å®æ–½ä»£ç 
```typescript
// components/homepage-cta.tsx
'use client'

import { ABTestWrapper } from '@/components/ab-test-wrapper'
import { trackEvent } from '@/lib/analytics'

export function HomepageCTA() {
  const handleClick = (variant: string) => {
    trackEvent('cta_click', {
      page: 'homepage',
      variant: variant,
      timestamp: Date.now()
    })
  }

  return (
    <ABTestWrapper testName="homepage_cta_optimization">
      {{
        control: (
          <button 
            onClick={() => handleClick('control')}
            className="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg transition-colors"
          >
            å¼€å§‹æ¢ç´¢
          </button>
        ),
        variant_a: (
          <button 
            onClick={() => handleClick('variant_a')}
            className="bg-green-500 hover:bg-green-600 text-white px-8 py-4 rounded-lg text-lg font-semibold shadow-lg transition-all"
          >
            ç«‹å³å‘ç°ç¾é£Ÿ
          </button>
        ),
        variant_b: (
          <button 
            onClick={() => handleClick('variant_b')}
            className="bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg border-2 border-orange-300 transition-all"
          >
            ğŸ³ å¼€å§‹çƒ¹é¥ªä¹‹æ—…
          </button>
        )
      }}
    </ABTestWrapper>
  )
}
```

#### é¢„æœŸç»“æœ
- **variant_a**ï¼šé¢„æœŸæå‡25%ï¼ˆåŸºäºé¢œè‰²å¿ƒç†å­¦å’Œå°ºå¯¸æ•ˆåº”ï¼‰
- **variant_b**ï¼šé¢„æœŸæå‡15%ï¼ˆåŸºäºè¡¨æƒ…ç¬¦å·çš„æƒ…æ„Ÿè¿æ¥ï¼‰
- **å®éªŒå‘¨æœŸ**ï¼š2-3å‘¨ï¼Œè¾¾åˆ°95%ç½®ä¿¡åº¦

### æ¡ˆä¾‹2ï¼šé£Ÿè°±å¡ç‰‡å¸ƒå±€æµ‹è¯•

#### å®éªŒç›®æ ‡
ä¼˜åŒ–é£Ÿè°±åˆ—è¡¨é¡µé¢çš„å¡ç‰‡å¸ƒå±€ï¼Œæå‡ç”¨æˆ·ç‚¹å‡»ç‡å’Œé¡µé¢åœç•™æ—¶é—´ã€‚

#### å˜ä½“è®¾è®¡
```typescript
const recipeCardTest = {
  name: 'recipe_card_layout',
  variants: {
    control: 'ä¼ ç»Ÿç½‘æ ¼å¸ƒå±€',
    masonry: 'ç€‘å¸ƒæµå¸ƒå±€', 
    list: 'åˆ—è¡¨å¸ƒå±€'
  },
  metrics: {
    primary: 'recipe_click_rate',
    secondary: ['scroll_depth', 'time_on_page', 'bounce_rate']
  }
}
```

---

## ğŸ”§ ç¯å¢ƒé…ç½®

### ç¯å¢ƒå˜é‡è®¾ç½®
```env
# .env.local

# Vercel Edge Config
EDGE_CONFIG=https://edge-config.vercel.com/...
EDGE_CONFIG_TOKEN=ecfg_...

# PostHogé…ç½®
NEXT_PUBLIC_POSTHOG_KEY=phc_...
NEXT_PUBLIC_POSTHOG_HOST=https://app.posthog.com

# ABæµ‹è¯•é…ç½®
NEXT_PUBLIC_AB_TEST_ENABLED=true
AB_TEST_DEBUG_MODE=false
```

### Vercel Edge Configè®¾ç½®
```json
{
  "homepage_cta_button": {
    "variants": ["control", "variant_a", "variant_b"],
    "traffic": 1.0,
    "enabled": true
  },
  "pricing_display": {
    "variants": ["control", "variant_a"],
    "traffic": 0.5,
    "enabled": true
  }
}
```

---

## ğŸ“ˆ æˆåŠŸæŒ‡æ ‡

### å®éªŒæˆåŠŸæ ‡å‡†
1. **ç»Ÿè®¡æ˜¾è‘—æ€§**: p < 0.05
2. **å®é™…æ˜¾è‘—æ€§**: æå‡å¹…åº¦ > 5%
3. **æ ·æœ¬é‡å……è¶³**: æ¯ç»„ > 1000æ ·æœ¬
4. **å®éªŒå‘¨æœŸ**: è‡³å°‘è¿è¡Œ1-2ä¸ªå®Œæ•´çš„ä¸šåŠ¡å‘¨æœŸ

### å…³é”®å†³ç­–æµç¨‹
```mermaid
graph TD
    A[å¼€å§‹å®éªŒ] --> B[æ”¶é›†æ•°æ®]
    B --> C{è¾¾åˆ°æœ€å°æ ·æœ¬é‡?}
    C -->|å¦| B
    C -->|æ˜¯| D{ç»Ÿè®¡æ˜¾è‘—?}
    D -->|å¦| E{è¾¾åˆ°æœ€å¤§å‘¨æœŸ?}
    E -->|å¦| B
    E -->|æ˜¯| F[åœæ­¢å®éªŒ - æ— ç»“è®º]
    D -->|æ˜¯| G{å®é™…æ„ä¹‰æ˜¾è‘—?}
    G -->|å¦| F
    G -->|æ˜¯| H[å®æ–½è·èƒœå˜ä½“]
```

---

*æœ€åæ›´æ–°ï¼š2024å¹´12æœˆ* 